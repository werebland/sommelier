!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("popmotion"),require("react")):"function"==typeof define&&define.amd?define(["popmotion","react"],t):t(null,e.React)}(this,function(e,t){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r}function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e,t){return e(t={exports:{}},t.exports),t.exports}var u=s(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.placeholder"):60113;function d(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case i:case s:case a:return e;default:switch(e=e&&e.$$typeof){case l:case f:case u:return e;default:return t}}case o:return t}}}t.typeOf=d,t.AsyncMode=c,t.ContextConsumer=l,t.ContextProvider=u,t.Element=n,t.ForwardRef=f,t.Fragment=i,t.Profiler=s,t.Portal=o,t.StrictMode=a,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===c||e===s||e===a||e===p||"object"==typeof e&&null!==e&&("function"==typeof e.then||e.$$typeof===u||e.$$typeof===l||e.$$typeof===f)},t.isAsyncMode=function(e){return d(e)===c},t.isContextConsumer=function(e){return d(e)===l},t.isContextProvider=function(e){return d(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return d(e)===f},t.isFragment=function(e){return d(e)===i},t.isProfiler=function(e){return d(e)===s},t.isPortal=function(e){return d(e)===o},t.isStrictMode=function(e){return d(e)===a}});a(u);u.typeOf,u.AsyncMode,u.ContextConsumer,u.ContextProvider,u.Element,u.ForwardRef,u.Fragment,u.Profiler,u.Portal,u.StrictMode,u.isValidElementType,u.isAsyncMode,u.isContextConsumer,u.isContextProvider,u.isElement,u.isForwardRef,u.isFragment,u.isProfiler,u.isPortal,u.isStrictMode;var l=s(function(e,t){});a(l);l.typeOf,l.AsyncMode,l.ContextConsumer,l.ContextProvider,l.Element,l.ForwardRef,l.Fragment,l.Profiler,l.Portal,l.StrictMode,l.isValidElementType,l.isAsyncMode,l.isContextConsumer,l.isContextProvider,l.isElement,l.isForwardRef,l.isFragment,l.isProfiler,l.isPortal,l.isStrictMode;var c,f=s(function(e){e.exports=u}),p=(f.typeOf,f.AsyncMode,f.ContextConsumer,f.ContextProvider,f.Element,f.ForwardRef,f.Fragment,f.Profiler,f.Portal,f.StrictMode,f.isValidElementType,f.isAsyncMode,f.isContextConsumer,f.isContextProvider,f.isElement,f.isForwardRef),d=(f.isFragment,f.isProfiler,f.isPortal,f.isStrictMode,function(e){return e}),h=function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v=function(e,t){return function(r){return Math.max(Math.min(r,t),e)}},y=function(e){return function(t){return"string"==typeof t&&0===t.indexOf(e)}},g=function(e){return e%1?Number(e.toFixed(5)):e},m={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},P=(h({},m,{transform:v(0,1)}),h({},m,{default:1}),function(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}}),b=P("deg"),C=P("%"),x=P("px"),E=P("vh"),S=P("vw"),w=v(0,255),O=function(e){var t=e.length;return function(r){if("string"!=typeof r)return r;for(var n,o={},i=function(e){return"string"==typeof e?e.split(/,\s*/):[e]}((n=r).substring(n.indexOf("(")+1,n.lastIndexOf(")"))),a=0;a<t;a++)o[e[a]]=void 0!==i[a]?parseFloat(i[a]):1;return o}},k=h({},m,{transform:function(e){return Math.round(w(e))}}),A=y("rgb"),T={test:function(e){return"string"==typeof e?A(e):function(e){return void 0!==e.red}(e)},parse:O(["red","green","blue","alpha"]),transform:function(e){var t=e.red,r=e.green,n=e.blue,o=e.alpha;return function(e){var t=e.red,r=e.green,n=e.blue,o=e.alpha;return"rgba("+t+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({red:k.transform(t),green:k.transform(r),blue:k.transform(n),alpha:g(o)})}},V=(y("hsl"),O(["hue","saturation","lightness","alpha"]),h({},T,{test:y("#"),parse:function(e){var t="",r="",n="";return e.length>4?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),t+=t,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),function(e){e.transition,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.afterChildren,e.beforeChildren,e.preTransition,e.applyAtStart,e.applyAtEnd;return i(e,["transition","delay","delayChildren","staggerChildren","staggerDirection","afterChildren","beforeChildren","preTransition","applyAtStart","applyAtEnd"])}),F=function(e,t){return"function"==typeof e?e(t):e},M=function(e,t,r,n){return e&&void 0!==e[t]?F(e[t],n):r},R=function(e,t,r,n,o){return Object.keys(e).forEach(function(i){var a=F(e[i],r);t.has(i)?n(t.get(i),a):o(i,a,r)})},D=function(e){var t=e.state,r=e.poses,n=e.startAction,i=e.stopAction,a=e.getInstantTransition,s=e.addActionDelay,u=e.getTransitionProps,l=e.resolveTarget,c=e.transformPose,f=e.posePriority,p=e.convertTransitionDefinition,d=e.setValue,h=e.setValueNative;return function(e,v,y){void 0===v&&(v={}),void 0===y&&(y=!0);var g=t.children,m=t.values,P=t.props,b=t.activeActions,C=t.activePoses,x=v.delay,E=void 0===x?0:x,S=g.size,w=o({},P,v),O=r[e],k=function(){return S&&y?function(e,t,r,n){var i=[],a=M(r,"delayChildren",0,n),s=M(r,"staggerChildren",0,n),u=M(r,"staggerDirection",1,n),l=(e.size-1)*s,c=1===u?function(e){return e*s}:function(e){return l-e*s};return Array.from(e).forEach(function(e,r){i.push(e.set(t,o({},n,{delay:a+c(r)})))}),i}(g,e,O,w):[]},A=function(){if(!O)return[];c&&(O=c(O,e,t));var r=O.preTransition,v=O.transition,y=O.applyAtStart,g=O.applyAtEnd;r&&r(w),y&&R(y,m,w,d,h);var P=Object.keys(V(O)).map(function(t){var r=C.has(t)?C.get(t):(C.set(t,[]),C.get(t)),c=r.indexOf(e);-1!==c&&r.splice(c,1);var d=f?f.indexOf(e):0,h=d<=0?0:function(e,t,r){for(var n=0,o=r-1;o>=0;o--){var i=e.indexOf(t[o]);if(-1!==i){n=i+1;break}}return n}(r,f,d);return r.splice(h,0,e),0===h?new Promise(function(e){var r=m.get(t),c=o({},w,{key:t,value:r}),f=l(r,F(O[t],c));b.has(t)&&i(b.get(t));var d=o({to:f},c,u(r,f,c)),h=function(e,t,r,n,o,i){var a;if("function"==typeof e)a=e(n);else if(e[t]||e.default){var s=e[t]||e.default;a="function"==typeof s?s(n):s}else a=e;return!1===a?i(r,n):o(r,a,n)}(v,t,r,d,p,a),y=F(O.delay,c);(E||y)&&(h=s(E||y,h)),b.set(t,n(r,h,e))}):Promise.resolve()});return g?[Promise.all(P).then(function(){R(g,m,w,d,h)})]:P};if(O&&S){if(F(O.beforeChildren,w))return Promise.all(A()).then(function(){return Promise.all(k())});if(F(O.afterChildren,w))return Promise.all(k()).then(function(){return Promise.all(A())})}return Promise.all(A().concat(k()))}},I=function(e){return function(e){return e.includes("scale")}(e)?1:0},j=function(e){var t=Array.isArray(e)?e:[e];return t.push("init"),t},_=function(e,t,r,n,o,i){void 0===o&&(o=I);var a=j(r).filter(Boolean).find(function(r){var n=e[r];return n&&(void 0!==n[t]||n.applyAtStart&&void 0!==n.applyAtStart[t]||n.applyAtEnd&&void 0!==n.applyAtEnd[t])});return i.set(t,[a||"init"]),a?function(e,t,r){var n=e.applyAtEnd&&void 0!==e.applyAtEnd[t]?e.applyAtEnd[t]:void 0!==e[t]?e[t]:e.applyAtStart&&void 0!==e.applyAtStart[t]?e.applyAtStart[t]:0;return F(n,r)}(e[a],t,n):o(t,n)},L=function(e,t){return function(r){var n=t.poses[r];Object.keys(V(n)).forEach(function(e,t){var r=t.userSetValues,n=t.createValue,o=t.convertValue,i=t.readValueFromSource,a=t.initialPose,s=t.poses,u=t.activePoses,l=t.props;return function(t){if(!e.has(t)){var c;if(r&&void 0!==r[t])c=o(r[t],t,l);else{var f=_(s,t,a,l,i,u);c=n(f,t,l)}e.set(t,c)}}}(e,t))}},B=function(e){var t=e.poses,r=e.passive,n=new Map;return Object.keys(t).forEach(L(n,e)),function(e){var t=e.setValueNative,r=e.initialPose,n=e.props,o=e.poses,i=new Set,a=function(e,r){if(e[r])for(var o in e[r])i.has(o)||(i.add(o),t(o,F(e[r][o],n),n))};j(r).forEach(function(e){var t=o[e];t&&(a(t,"applyAtEnd"),a(t,"applyAtStart"))})}(e),r&&Object.keys(r).forEach(function(e,t){var r=t.passive,n=t.ancestorValues,o=t.createValue,i=t.readValue,a=t.props;return function(t){var s=r[t],u=s[0],l=s[1],c=s[2],f=c&&n.length?function(e,t,r){if(!0===t)return r[0]&&r[0].values.get(e);var n=r.find(function(e){return e.label===t});return n&&n.values.get(e)}(u,c,n):!!e.has(u)&&e.get(u);if(f){var p=o(i(f),t,a,{passiveParentKey:u,passiveParent:f,passiveProps:l});e.set(t,p)}}}(n,e)),n},z=function(e,t){return Object.keys(e).forEach(function(r){var n=e[r];e[r]=void 0!==n.transition?n:function(e,t,r){return o({},e,{transition:r.has(t)?r.get(t):r.get("default")})}(n,r,t)}),e},U=function(e){var t=e.getDefaultProps,r=e.defaultTransitions,n=e.bindOnChange,a=e.startAction,s=e.stopAction,u=e.readValue,l=e.readValueFromSource,c=e.resolveTarget,f=e.setValue,p=e.setValueNative,d=e.createValue,h=e.convertValue,v=e.getInstantTransition,y=e.getTransitionProps,g=e.addActionDelay,m=e.selectValueToRead,P=e.convertTransitionDefinition,b=e.transformPose,C=e.posePriority,x=e.extendAPI;return function(e){var E=e.parentValues,S=e.ancestorValues,w=void 0===S?[]:S;E&&w.unshift({values:E});var O=new Map,k=new Map,A=new Set,T=z(function(e){e.label,e.props,e.values,e.parentValues,e.ancestorValues,e.onChange,e.passive,e.initialPose;return i(e,["label","props","values","parentValues","ancestorValues","onChange","passive","initialPose"])}(e),r),V=e.props||{};t&&(V=o({},V,t(e)));var F=e.passive,M=e.values,R=e.initialPose,I=void 0===R?"init":R,j=B({poses:T,passive:F,ancestorValues:w,readValue:u,setValueNative:p,createValue:d,convertValue:h,readValueFromSource:l,userSetValues:M,initialPose:I,activePoses:k,props:V}),_={activeActions:O,activePoses:k,children:A,props:V,values:j},L=e.onChange;L&&Object.keys(L).forEach(n(j,L));var U=D({state:_,poses:T,getInstantTransition:v,getTransitionProps:y,convertTransitionDefinition:P,setValue:f,setValueNative:p,startAction:a,stopAction:s,resolveTarget:c,addActionDelay:g,transformPose:b,posePriority:C});return x({set:U,unset:function(e,t){var r=[];k.forEach(function(t){var n=t.indexOf(e);if(-1!==n){var o=t[0];t.splice(n,1);var i=t[0];i!==o&&-1===r.indexOf(i)&&r.push(i)}});var n,o=r.sort((n=C,function(e,t){var r=n.indexOf(e),o=n.indexOf(t);return-1===r&&-1!==o?-1:-1!==r&&-1===o?1:r-o})).map(function(e){return U(e,t,!1)});return A.forEach(function(t){return o.push(t.unset(e))}),Promise.all(o)},get:function(e){return e?m(j.get(e)):function(e,t){var r={};return e.forEach(function(e,n){return r[n]=t(e)}),r}(j,m)},has:function(e){return!!T[e]},setProps:function(e){return _.props=o({},_.props,e)},_addChild:function(t,r){var n=r(o({initialPose:I},t,{ancestorValues:[{label:e.label,values:j}].concat(w)}));return A.add(n),n},removeChild:function(e){return A.delete(e)},clearChildren:function(){A.forEach(function(e){return e.destroy()}),A.clear()},destroy:function(){O.forEach(s),A.forEach(function(e){return e.destroy()})}},_,e)}},$=function(){return($=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function H(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r}!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(c||(c={}));var N=function(e,t){return"function"==typeof e?e(t):e},X=e.transform.interpolate,q=function(t){return function(r){var n;return e.pointer((n={},n[t]="string"==typeof r?parseFloat(r):r,n)).pipe(function(e){return e[t]})}},Y=q("x"),W=q("y"),K=function(e,t,r,n){return function(o){var i=o.from,a=o.type,s=o.dimensions,u=o.dragBounds,l=e(s.measurementAsPixels(n,i,a)),c=[];if(u){var f=N(u,o);void 0!==f[t]&&c.push(function(e){return Math.max(e,s.measurementAsPixels(n,f[t],a))}),void 0!==f[r]&&c.push(function(e){return Math.min(e,s.measurementAsPixels(n,f[r],a))})}return a===C&&c.push(X([0,s.get(n)],[0,100]),function(e){return e+"%"}),c.length?l.pipe.apply(l,c):l}},G=function(t){return e.action(function(e){var r=e.update,n=e.complete;r(t),n()})},Z=function(t){var r=t.from,n=t.velocity,o=t.to;return e.spring({from:r,to:o,velocity:n,stiffness:500,damping:25,restDelta:.5,restSpeed:10})},J=function(t){var r=t.from,n=t.velocity,o=t.to;return e.spring({from:r,to:o,velocity:n,stiffness:700,damping:0===o?100:35})},Q={x:Z,y:Z,z:Z,rotate:Z,rotateX:Z,rotateY:Z,rotateZ:Z,scaleX:J,scaleY:J,scale:J,opacity:function(t){var r=t.from,n=t.to;return e.tween({from:r,to:n,ease:d})},default:e.tween},ee=$({},Q,{x:K(Y,"left","right",c.width),y:K(W,"top","bottom",c.height)}),te=function(e){var t=e.from;return G(t)},re=new Map([["default",Q],["drag",ee],["dragEnd",$({},Q,{x:te,y:te})]]),ne=[m,b,C,x,S,E,{test:function(e){return"auto"===e},parse:function(e){return e}}],oe=function(e){return ne.find(function(e){return function(t){return t.test(e)}}(e))},ie=function(t,r){return void 0===t&&(t=0),e.chain(e.delay(t),r)},ae={tween:e.tween,spring:e.spring,decay:e.decay,keyframes:e.keyframes,physics:e.physics},se={linear:e.easing.linear,easeIn:e.easing.easeIn,easeOut:e.easing.easeOut,easeInOut:e.easing.easeInOut,circIn:e.easing.circIn,circOut:e.easing.circOut,circInOut:e.easing.circInOut,backIn:e.easing.backIn,backOut:e.easing.backOut,backInOut:e.easing.backInOut,anticipate:e.easing.anticipate},ue=function(t){var r=t.startEvents,n=t.endEvents,o=t.startPose,i=t.endPose,a=t.startCallback,s=t.endCallback,u=t.useDocumentToEnd,l=t.preventDefault;return function(t,c,f,p){var d=o+"Start",h=o+"End",v=e.listen(t,r).start(function(r){l&&r.preventDefault(),f.set(o),a&&p[a]&&p[a](r);var d=e.listen(u?document.documentElement:t,n+(u?" mouseenter":"")).start(function(e){u&&"mouseenter"===e.type&&1===e.buttons||(l&&e.preventDefault(),c.get(h).stop(),f.unset(o),f.set(i),s&&p[s]&&p[s](e))});c.set(h,d)});c.set(d,v)}},le={draggable:ue({startEvents:"mousedown touchstart",endEvents:"mouseup touchend",startPose:"drag",endPose:"dragEnd",startCallback:"onDragStart",endCallback:"onDragEnd",useDocumentToEnd:!0,preventDefault:!0}),hoverable:ue({startEvents:"mouseenter",endEvents:"mouseleave",startPose:"hover",endPose:"hoverEnd"}),focusable:ue({startEvents:"focus",endEvents:"blur",startPose:"focus",endPose:"blur"}),pressable:ue({startEvents:"mousedown touchstart",endEvents:"mouseup touchend",startPose:"press",endPose:"pressEnd",startCallback:"onPressStart",endCallback:"onPressEnd",useDocumentToEnd:!0})},ce=Object.keys(le),fe=function(e){var t=e.top,r=e.right,n=e.bottom;return{x:(e.left+r)/2,y:(t+n)/2}},pe=["width","height","top","left","bottom","right"],de=new Set(pe),he=function(e){return de.has(e)},ve=function(t,r,n){var o=t.values,i=t.props;if(o.has(r)){var a=o.get(r).raw;a.update(n),a.update(n)}else o.set(r,{raw:e.value(n,function(e){return i.elementStyler.set(r,e)})})},ye=function(e,t){var r=e.props,n=r.dimensions,o=r.element,i=r.elementStyler;if(!n.has())return{};var a=n.get(),s=function(e){var t=e.style.transform;e.style.transform="";var r=e.getBoundingClientRect();return e.style.transform=t,r}(o),u=a.left===s.left?0:a.right===s.right?"100%":"50%",l=a.top===s.top?0:a.bottom===s.bottom?"100%":"50%";i.set({originX:u,originY:l}),a.width!==s.width&&(ve(e,"scaleX",a.width/s.width),t.scaleX=1),a.height!==s.height&&(ve(e,"scaleY",a.height/s.height),t.scaleY=1);var c=fe(a),f=fe(s);return"50%"===u&&(ve(e,"x",c.x-f.x),t.x=0),"50%"===l&&(ve(e,"y",c.y-f.y),t.y=0),i.render(),t},ge=function(e,t){return r=t,Object.keys(r).some(he)?function(e,t){var r=e.props,n=r.dimensions,o=r.elementStyler;n.measure();t.width,t.height,t.top,t.left,t.bottom,t.right,t.position;var i=H(t,["width","height","top","left","bottom","right","position"]),a=pe.concat("position").reduce(function(r,n){return void 0!==t[n]&&(r[n]=N(t[n],e.props)),r},{});return o.set(a).render(),ye(e,i)}(e,t):ye(e,t);var r},me=function(e,t){return parseFloat(e.split(", ")[t])},Pe=function(e,t){return function(r,n,o){var i=o.transform;if("none"===i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);return a?me(a[1],t):me(i.match(/^matrix\((.+)\)$/)[1],e)}},be={width:function(e,t){return t.width},height:function(e,t){return t.height},top:function(e,t,r){var n=r.top;return parseFloat(n)},left:function(e,t,r){var n=r.left;return parseFloat(n)},bottom:function(e,t,r){var n=t.height,o=r.top;return parseFloat(o)+n},right:function(e,t,r){var n=t.width,o=r.left;return parseFloat(o)+n},x:Pe(4,13),y:Pe(5,14)},Ce=function(e){return void 0!==be[e]},xe=function(t,r){var n=r.onDragStart,o=r.onDragEnd,i=r.onPressStart,a=r.onPressEnd,s=r.draggable,u=r.hoverable,l=r.focusable,c=r.pressable,f=r.dragBounds,p=H(r,["onDragStart","onDragEnd","onPressStart","onPressEnd","draggable","hoverable","focusable","pressable","dragBounds"]),d=$({flip:{}},p,{props:$({},p.props,{onDragStart:n,onDragEnd:o,onPressStart:i,onPressEnd:a,dragBounds:f,draggable:s,hoverable:u,focusable:l,pressable:c,element:t,elementStyler:e.styler(t,{preparseOutput:!1}),dimensions:function(e){var t=!1,r={width:0,height:0,top:0,left:0,bottom:0,right:0};return{get:function(e){return e?r[e]:r},measure:function(){return r=e.getBoundingClientRect(),t=!0,r},measurementAsPixels:function(e,t,n){return n===C?("string"==typeof t?parseFloat(t):t)/100*r[e]:t},has:function(){return t}}}(t)})});if(s){var h=function(e){var t={preTransition:function(e){return e.dimensions.measure()}},r={};return!0!==e&&"x"!==e||(t.x=r.x=0),!0!==e&&"y"!==e||(t.y=r.y=0),{drag:t,dragEnd:r}}(s),v=h.drag,y=h.dragEnd;d.drag=$({},d.drag,v),d.dragEnd=$({},d.dragEnd,y)}return d},Ee=function(t){var r=t.transformPose,n=t.addListenerToValue,o=t.extendAPI,i=t.readValueFromSource,a=t.posePriority,s=t.setValueNative;return U({bindOnChange:function(e,t){return function(r){e.has(r)&&e.get(r).raw.subscribe(t[r])}},readValue:function(e){return e.raw.get()},setValue:function(e,t){return e.raw.update(t)},createValue:function(t,r,o,i){var a=o.elementStyler,s=void 0===i?{}:i,u=s.passiveParent,l=s.passiveProps,c=u?function(t,r,n){var o=e.value(n(t));return r.raw.subscribe(function(e){return o.update(n(e))}),{raw:o}}(t,u,l):function(t){var r=oe(t);return{raw:e.value(t),type:r}}(t);return n&&c.raw.subscribe(n(r,a)),c},convertValue:function(e,t,r){var o=r.elementStyler;return n&&e.subscribe(n(t,o)),{raw:e,type:oe(e.get())}},getTransitionProps:function(e,t){var r=e.raw,n=e.type;return{from:r.get(),velocity:r.getVelocity(),to:t,type:n}},resolveTarget:function(e,t){return t},selectValueToRead:function(e){return e.raw},startAction:function(e,t,r){var n=e.raw,o={update:function(e){return n.update(e)},complete:r};return t.start(o)},stopAction:function(e){return e.stop()},getInstantTransition:function(e,t){var r=t.to;return G(r)},convertTransitionDefinition:function(t,r,n){if(function(e){return void 0!==e.start}(r))return r;var o=r.delay,i=r.min,a=r.max,s=r.round,u=function(t,r,n){var o=n.from,i=n.to,a=n.velocity,s=r.type,u=void 0===s?"tween":s,l=r.ease,c=H(r,["type","ease"]);if(ae[u],"tween"===u){var f=typeof l;if("function"!==f)if("string"===f)l=se[l];else if(Array.isArray(l)){l.length;var p=l[0],d=l[1],h=l[2],v=l[3];l=e.easing.cubicBezier(p,d,h,v)}}var y="keyframes"!==u?{from:o,to:i,velocity:a,ease:l}:{ease:l};return ae[u]($({},y,c))}(0,H(r,["delay","min","max","round"]),n),l=[];return o&&(u=ie(o,u)),void 0!==i&&l.push(function(e){return Math.max(e,i)}),void 0!==a&&l.push(function(e){return Math.min(e,a)}),s&&l.push(Math.round),l.length?u.pipe.apply(u,l):u},setValueNative:s,addActionDelay:ie,defaultTransitions:re,transformPose:r,readValueFromSource:i,posePriority:a,extendAPI:o})}({posePriority:["drag","press","focus","hover"],transformPose:function(e,t,r){var n,o=e.flip,i=H(e,["flip"]);return function(e,t,r){return r.props.element instanceof HTMLElement&&(!0===e||"flip"===t)}(o,t,r)?ge(r,i):(n=i,Object.keys(n).some(Ce)?function(e,t){var r=e.values,n=e.props,o=n.element,i=n.elementStyler,a=Object.keys(t).filter(Ce),s=[],u=getComputedStyle(o),l=!1;if(a.forEach(function(o){var i=r.get(o),a=oe(i.raw.get()),u=N(t[o],n);a!==oe(u)&&(s.push(o),l||(l=!0,t.applyAtEnd=t.applyAtEnd?$({},t.applyAtEnd):{}),t.applyAtEnd[o]=t.applyAtEnd[o]||t[o],ve(e,o,u))}),!s.length)return t;var c=o.getBoundingClientRect(),f={top:u.top,left:u.left,bottom:u.bottom,right:u.right,transform:u.transform};i.render();var p=o.getBoundingClientRect();return s.forEach(function(r){ve(e,r,be[r](o,c,f)),t[r]=be[r](o,p,u)}),i.render(),t}(r,i):i)},addListenerToValue:function(e,t){return function(r){return t.set(e,r)}},readValueFromSource:function(e,t){var r=t.elementStyler,n=t.dragBounds,o=r.get(e);if(n&&("x"===e||"y"===e)){var i="x"===e?n.left||n.right:n.top||n.bottom;if(i)o=oe(i).transform(o)}return isNaN(o)?o:parseFloat(o)},setValueNative:function(e,t,r){return r.elementStyler.set(e,t)},extendAPI:function(e,t,r){var n=t.props,o=t.activeActions,i=n.dimensions.measure,a=$({},e,{addChild:function(t,r){return e._addChild(xe(t,r),Ee)},measure:i,flip:function(t){return t&&(i(),t()),e.set("flip")}});return n.elementStyler.render(),function(e,t,r,n){var o=n.props;ce.forEach(function(n){o[n]&&le[n](e,t,r,o)})}(n.element,o,a,r),a}});var Se,we=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class)|(on[A-Z].*)|((data|aria|x)-.*))$/i,Oe=((Se=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}})&&"object"==typeof Se&&"default"in Se?Se.default:Se)(we.test.bind(we)),ke=t.createContext({}),Ae=ke.Consumer,Te=ke.Provider,Ve=function(e,t){return Array.isArray(e)?-1!==e.indexOf(t):e===t},Fe=function(){return!0},Me=function(e){e.elementType,e.poseConfig,e.onValueChange,e.innerRef,e._pose,e.pose,e.initialPose,e.poseKey,e.onPoseComplete,e.getParentPoseConfig,e.registerChild,e.onUnmount,e.getInitialPoseFromParent,e.popFromFlow,e.values,e.parentValues,e.onDragStart,e.onDragEnd,e.onPressStart,e.onPressEnd;return i(e,["elementType","poseConfig","onValueChange","innerRef","_pose","pose","initialPose","poseKey","onPoseComplete","getParentPoseConfig","registerChild","onUnmount","getInitialPoseFromParent","popFromFlow","values","parentValues","onDragStart","onDragEnd","onPressStart","onPressEnd"])},Re=function(e){function r(t){var r=e.call(this,t)||this;r.children=new Set,r.childrenHandlers={registerChild:function(e){r.children.add(e),r.poser&&r.flushChildren()},onUnmount:function(e){return r.poser.removeChild(e)},getParentPoseConfig:function(){return r.poseConfig},getInitialPoseFromParent:function(){return r.getInitialPose()}},r.getRefs=function(){var e={},t=r.props.elementType;return"string"==typeof t||p(t)?e.ref=r.setRef:(e.innerRef=r.setRef,e.hostRef=r.setRef),e},r.setRef=function(e){if(e instanceof Element||r.ref&&null===e){var t=r.props.innerRef;t&&("function"==typeof t?t(e):t.current=e),r.ref=e}},r.shouldForwardProp="string"==typeof r.props.elementType?Oe:Fe;var n=r.props.poseConfig;return r.poseConfig="function"==typeof n?n(Me(t)):n,r}return n(r,e),r.prototype.getInitialPose=function(){var e=this.props,t=e.getInitialPoseFromParent,r=e.pose,n=e._pose,o=e.initialPose;if(o)return o;var i=t&&t(),a=(Array.isArray(i)?i:[i]).concat(r,n).filter(Boolean);return a.length>0?a:void 0},r.prototype.getFirstPose=function(){var e=this.props,t=e.initialPose,r=e.pose,n=e._pose;if(t){var o=(Array.isArray(r)?r:[r]).concat(n).filter(Boolean);return 1===o.length?o[0]:o}},r.prototype.getSetProps=function(){var e,t=Me(this.props);return this.props.popFromFlow&&this.ref&&this.ref instanceof HTMLElement?this.popStyle?t.style=this.popStyle:(t.style=o({},t.style,{position:"absolute",top:(e=this.ref).offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}),this.popStyle=t.style):this.popStyle=null,t},r.prototype.componentDidMount=function(){var e=this;this.ref;var t,r=this.props,n=r.onValueChange,i=r.registerChild,a=r.values,s=r.parentValues,u=r.onDragStart,l=r.onDragEnd,c=r.onPressStart,f=r.onPressEnd,p=o({},this.poseConfig,{initialPose:this.getInitialPose(),values:a||this.poseConfig.values,parentValues:s?(t=s,Object.keys(t).reduce(function(e,r){return e.set(r,{raw:t[r]}),e},new Map)):void 0,props:this.getSetProps(),onDragStart:u,onDragEnd:l,onPressStart:c,onPressEnd:f,onChange:n});i?i({element:this.ref,poseConfig:p,onRegistered:function(t){return e.initPoser(t)}}):this.initPoser(function(e,t){return Ee(xe(e,t))}(this.ref,p))},r.prototype.getSnapshotBeforeUpdate=function(e){var t=e.pose,r=e._pose;return(Ve(t,"flip")||Ve(r,"flip"))&&this.poser.measure(),null},r.prototype.componentDidUpdate=function(e){var t=this.props,r=t.pose,n=t._pose,o=t.poseKey;this.poser.setProps(this.getSetProps()),(o!==e.poseKey||function(e,t){if(e===t)return!1;var r=Array.isArray(e),n=Array.isArray(t);if(r!==n||!r&&!n)return!0;if(r&&n){var o=e.length;if(o!==t.length)return!0;for(var i=0;i<o;i++)if(e[i]!==t[i])return!0}return!1}(e.pose,r)||"flip"===r)&&this.setPose(r),n===e._pose&&"flip"!==n||this.setPose(n)},r.prototype.componentWillUnmount=function(){if(this.poser){var e=this.props.onUnmount;e&&e(this.poser),this.poser.destroy()}},r.prototype.initPoser=function(e){this.poser=e,this.flushChildren();var t=this.getFirstPose();t&&this.setPose(t)},r.prototype.setPose=function(e){var t=this,r=this.props.onPoseComplete,n=Array.isArray(e)?e:[e];Promise.all(n.map(function(e){return e&&t.poser.set(e)})).then(function(){return r&&r(e)})},r.prototype.flushChildren=function(){var e=this;this.children.forEach(function(t){var r=t.element,n=t.poseConfig;return(0,t.onRegistered)(e.poser.addChild(r,n))}),this.children.clear()},r.prototype.render=function(){var e,r=this.props.elementType;return t.createElement(Te,{value:this.childrenHandlers},t.createElement(r,(e=this.shouldForwardProp,[this.getSetProps(),this.getRefs()].reduce(function(t,r){for(var n in r)e(n)&&(t[n]=r[n]);return t},{}))))},r}(t.PureComponent),De=new Map,Ie=function(e){var r=function(r){return void 0===r&&(r={}),function(n){var a=n.withParent,s=void 0===a||a,u=i(n,["withParent"]);return!s||u.parentValues?t.createElement(Re,o({poseConfig:r,elementType:e},u)):t.createElement(Ae,null,function(n){return t.createElement(Re,o({poseConfig:r,elementType:e},u,n))})}};return De.set(e,r),r},je=function(e){return t=e,De.has(t)?De.get(t):Ie(t);var t};["a","article","aside","audio","b","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dialog","div","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","i","iframe","img","input","label","legend","li","nav","object","ol","option","p","param","picture","pre","progress","q","section","select","span","strong","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","ul","video","circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].reduce(function(e,t){return e[t]=Ie(t),e},je);var _e=function(e){return e&&e.key,("number"==typeof e.key?e.key.toString():e.key).replace(".$","")},Le=function(e,r){return t.createElement(e.type,o({key:e.key,ref:e.ref},r,e.props))},Be=function(e,r){var n=function(e,r){var n=r.displayedChildren,o=r.finishedLeaving,a=r.hasInitialized,s=r.indexedChildren,u=r.scheduleChildRemoval,l=e.children,c=e.preEnterPose,f=e.enterPose,p=e.exitPose,d=e.animateOnMount,h=(e.enterAfterExit,e.flipMove),v=(e.onRest,i(e,["children","preEnterPose","enterPose","exitPose","animateOnMount","enterAfterExit","flipMove","onRest"])),y=ze(l),g={displayedChildren:[]},m=n.map(_e),P=y.map(_e),b=0!==Object.keys(v).length,C=new Set(P.filter(function(e){return o.hasOwnProperty(e)||-1===m.indexOf(e)}));C.forEach(function(e){return delete o[e]});var x=[],E={};m.forEach(function(e){if(!C.has(e)){var t=o.hasOwnProperty(e);(t||-1===P.indexOf(e))&&(x.push(e),t||(o[e]=!1,E[e]=!0))}});var S=new Set(m.filter(function(e,t){if(C.has(e))return!1;var r=P.indexOf(e);return-1!==r&&t!==r}));return y.forEach(function(e){var r={};C.has(e.key)?((a||d)&&(r.initialPose=c),r._pose=f):S.has(e.key)&&h?r._pose=[f,"flip"]:r._pose=f;var n=t.cloneElement(e,r);s[e.key]=n,g.displayedChildren.push(b?Le(n,v):n)}),x.forEach(function(e){var r=s[e],n=E[e]?t.cloneElement(r,{_pose:p,onPoseComplete:function(t){u(e);var n=r.props.onPoseComplete;n&&n(t)},popFromFlow:h}):r,o=m.indexOf(e);s[r.key]=n,g.displayedChildren.splice(o,0,b?Le(n,v):n)}),g}(e,r);return n.hasInitialized=!0,n},ze=function(e){var r=[];return t.Children.forEach(e,function(e){return e&&r.push(e)}),r},Ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={displayedChildren:[],finishedLeaving:{},hasInitialized:!1,indexedChildren:{},scheduleChildRemoval:function(e){return t.removeChild(e)}},t}return n(t,e),t.prototype.removeChild=function(e){var t=this.state,r=t.displayedChildren,n=t.finishedLeaving,i=this.props,a=i.enterAfterExit,s=i.onRest;if(n.hasOwnProperty(e)&&(n[e]=!0,Object.keys(n).every(function(e){return n[e]}))){var u=r.filter(function(e){return!n.hasOwnProperty(e.key)}),l=a?o({finishedLeaving:{}},Be(o({},this.props,{enterAfterExit:!1}),o({},this.state,{displayedChildren:u}))):{finishedLeaving:{},displayedChildren:u};this.setState(l,s)}},t.prototype.shouldComponentUpdate=function(e,t){return this.state!==t},t.prototype.render=function(){return this.state.displayedChildren},t.defaultProps={flipMove:!1,enterAfterExit:!1,preEnterPose:"exit",enterPose:"enter",exitPose:"exit"},t.getDerivedStateFromProps=Be,t}(t.Component),$e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.render=function(){return t.createElement(Ue,o({},this.props))},r.defaultProps={flipMove:!0},r}(t.Component);window.posed=je,window.PoseGroup=$e});
