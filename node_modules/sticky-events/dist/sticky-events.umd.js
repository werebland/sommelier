!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.stickyEvents={})}(this,function(e){"use strict";var n={CHANGE:"sticky-change",STUCK:"sticky-stuck",UNSTUCK:"sticky-unstuck"},c={SENTINEL:"sticky-events--sentinel",SENTINEL_TOP:"sticky-events--sentinel-top",SENTINEL_BOTTOM:"sticky-events--sentinel-bottom"},l=".sticky-events",a=[];function p(e,t){t.dispatchEvent(new CustomEvent(n.CHANGE,{detail:{isSticky:e}})),t.dispatchEvent(new CustomEvent(e?n.STUCK:n.UNSTUCK))}function u(e,o){return Array.from(e.querySelectorAll(l)).map(function(e){var t=document.createElement("div"),n=e.parentElement;switch(t.classList.add(c.SENTINEL,o),o){case c.SENTINEL_TOP:n.insertBefore(t,e),Object.assign(t.style,i(e,t,o));break;case c.SENTINEL_BOTTOM:n.appendChild(t),Object.assign(t.style,i(e,t,o))}return t})}function i(e,t,n){var o=window.getComputedStyle(e),i=window.getComputedStyle(e.parentElement);switch(n){case c.SENTINEL_TOP:return{top:"calc(".concat(o.getPropertyValue("top")," * -1)"),height:0};case c.SENTINEL_BOTTOM:var r=parseInt(i.paddingTop);return{bottom:o.top,height:"".concat(e.getBoundingClientRect().height+r,"px")}}}e.StickyEvent=n,e.unobserveStickyEvents=function(){var i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];a.forEach(function(e){var t=e.container,n=e.observer,o=e.sentinels;i&&Array.from(t.querySelectorAll(l)).forEach(function(e){return p(!1,e)}),o.forEach(function(e){return e.remove()}),n.disconnect(),n=null}),a.length=0},e.observeStickyEvents=function(){var s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document;window.self===window.top?window.requestAnimationFrame(function(){var e,t,n,o,i,r;a.push((e=s,t=new IntersectionObserver(function(e){e.forEach(function(e){var t=e.boundingClientRect,n=e.rootBounds,o=e.target.parentElement,i=o.querySelector(l);o.style.position="relative",t.bottom>=n.top&&t.bottom<n.bottom?p(!1,i):t.bottom<n.top&&p(!0,i)})},Object.assign({threshold:[0]},!(e instanceof HTMLDocument)&&{root:e})),(n=u(e,c.SENTINEL_TOP)).forEach(function(e){return t.observe(e)}),{container:e,observer:t,sentinels:n})),a.push((o=s,i=new IntersectionObserver(function(e){e.forEach(function(e){var t,n,o,i,r,s,c=e.boundingClientRect,a=e.rootBounds,u=e.target.parentElement.querySelector(l);c.top<a.top&&c.bottom<a.bottom?p(!1,u):c.bottom>a.top&&(n=(t=u).previousElementSibling,o=t.getBoundingClientRect().top,i=n.getBoundingClientRect().top,r=Math.round(Math.abs(o-i)),s=Math.abs(parseInt(window.getComputedStyle(n).getPropertyValue("top"))),r!==s)&&p(!0,u)})},Object.assign({threshold:[1]},!(o instanceof HTMLDocument)&&{root:o})),(r=u(o,c.SENTINEL_BOTTOM)).forEach(function(e){return i.observe(e)}),{container:o,observer:i,sentinels:r}))}):console.warn("StickyEvents: There are issues with using IntersectionObservers in an iframe, canceling initialization. Please see https://github.com/w3c/IntersectionObserver/issues/183")},Object.defineProperty(e,"__esModule",{value:!0})});
